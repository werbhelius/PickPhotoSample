package com.werb.pickphotosampleimport android.content.Contextimport android.graphics.BitmapFactoryimport android.support.v7.widget.RecyclerViewimport android.view.LayoutInflaterimport android.view.Viewimport android.view.ViewGroupimport android.widget.ImageViewimport android.widget.RelativeLayoutimport com.werb.pickphotoview.util.PickConfigimport com.werb.pickphotoview.util.PickUtilsimport java.util.ArrayList/** * Created by wanbo on 2016/12/31. */class SampleAdapter internal constructor(private val context: Context, private var imagePaths: ArrayList<String>?) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {        return GridImageViewHolder(LayoutInflater.from(context).inflate(R.layout.item_image, parent, false))    }    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {        if (imagePaths != null) {            val path = imagePaths!![position]            val gridImageViewHolder = holder as GridImageViewHolder            gridImageViewHolder.bindItem(path)        }    }    override fun getItemCount(): Int {        return if (imagePaths != null) {            imagePaths!!.size        } else {            0        }    }    fun updateData(paths: ArrayList<String>) {        imagePaths = paths        notifyDataSetChanged()    }    // ViewHolder    private inner class GridImageViewHolder internal constructor(itemView: View) : RecyclerView.ViewHolder(itemView) {        private val gridImage: ImageView        private val scaleSize: Int        init {            gridImage = itemView.findViewById(R.id.image)            val screenWidth = PickUtils.getInstance(context.applicationContext).widthPixels            val space = PickUtils.getInstance(context.applicationContext).dp2px(PickConfig.ITEM_SPACE.toFloat())            scaleSize = (screenWidth - (4 + 1) * space) / 4            val params = gridImage.layoutParams as RelativeLayout.LayoutParams            params.width = scaleSize            params.height = scaleSize        }        internal fun bindItem(path: String) {            gridImage.setImageBitmap(BitmapFactory.decodeFile(path))        }    }}